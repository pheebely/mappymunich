const home = [11.575853, 48.137437] //coordinates for the default "home" view

	mapboxgl.accessToken = 'pk.eyJ1IjoicGhlZWJlbHkiLCJhIjoiY2s2aGZoZTR4MDJsdTNlcXI2NnI1bXhuaiJ9.l0hhT8MPnRuT8LuyPP8Ovw';
const map = new mapboxgl.Map({
container: 'map',
// Choose from Mapbox's core styles, or make your own style with Mapbox Studio
style: 'mapbox://styles/pheebely/clazrqxnm000x15nwlwkpd8qn',
center: home,
zoom: 14.5,
minZoom: 4,
maxZoom: 17,
pitch: 40 // pitch in degrees
});


// Add the geocoder control to the map.
map.addControl(
new MapboxGeocoder({
accessToken: mapboxgl.accessToken,
mapboxgl: mapboxgl,
collapsed: true
})
);

// Add geolocate control to the map.
map.addControl(
new mapboxgl.GeolocateControl({
positionOptions: {
enableHighAccuracy: true
},
// When active the map will receive updates to the device's location as it changes.
trackUserLocation: true,
// Draw an arrow next to the location dot to indicate which direction the device is heading.
showUserHeading: true
})
);

// Add home button to fly to home
const homePosition = {
    center: home,
    zoom: 14.5,
    pitch: 40,
    bearing: 0
};

class HomeButton {
    onAdd(map){
      this.map = map;
      this.container = document.createElement('div');
      this.container.className = 'mapboxgl-ctrl mapboxgl-ctrl-group';
      this.container.innerHTML = `<button class="icon" title="Home"><i class="fa-solid fa-house"></i></button>`;
      this.container.addEventListener("click",() => map.flyTo(homePosition));
      return this.container;
    }
    onRemove(){
      this.container.parentNode.removeChild(this.container);
      this.map = undefined;
    }
  }
  
  const FlytoControl = new HomeButton();
  
  map.addControl(FlytoControl);


// Add zoom and rotation controls to the map.
map.addControl(new mapboxgl.NavigationControl());

// Add font awesome symbols for accessibility and must-see
const wheelchair = "<i class=\"fa-brands fa-accessible-icon\"></i>"
const elderly = "<i class=\"fa-solid fa-person-cane\"></i>"
const stroller = "<i class=\"fa-solid fa-baby-carriage\"></i>"
const elev = "<i class=\"fa-solid fa-elevator\"></i>"
const fire = "<i class=\"fa-solid fa-fire\"></i>"

// Add attractions layer as constant
const attractions = {
  "type": "FeatureCollection",
  "name": "Munich-Intro",
  "features": [
    { "type": "Feature", "properties": { "Latitude": 48.139185, "Longitude": 11.566191, "Name": "Karlsplatz", "MustSee": " ", "Number": 1, "Type": "Landmark", "Address": "Karlsplatz 1, 80335 München", "Hours": "Open 24 hours", "Website": "https://www.muenchen.de/sehenswuerdigkeiten/orte/120328.html", "Accessibility": wheelchair+"&nbsp;"+elderly+"&nbsp;"+stroller, 
    "image": "src='https://www.munich.travel/var/ger_muc/storage/images/_aliases/stage_medium/7/9/0/7/717097-11-eng-GB/Stachus-Panorama-foto-joerg-lutz.jpg' alt='Karlsplatz plaza viewed from above'",
    "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.566191, 48.139185 ] } },
    { "type": "Feature", "properties": { "Latitude": 48.138169, "Longitude": 11.57152, "Name": "Kaufingerstrasse/Neuhauserstrasse<br>", "MustSee": " ", "Number": 2, "Type": "Shopping", "Address": " ", "Hours": "Open 24 hours", "Accessibility": wheelchair+"&nbsp;"+elderly+"&nbsp;"+stroller, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.57152, 48.138169 ] } },
    { "type": "Feature", "properties": { "Latitude": 48.135184, "Longitude": 11.569654, "Name": "Asamkirche", "MustSee": " ", "Number": 3, "Type": "Religious", "Address": "Sendlinger Str. 32, 80331 München", "Hours": "Su-Th 09:00-18:00 <br> Fr 13:00-19:00", "Elevator": " ", "Website": "https://alterpeter.de/nebenkirchen/#asamkirche", "Phone": "+49 89236879 89", "Accessibility": null, "Description": null}, "geometry": { "type": "Point", "coordinates": [ 11.569654, 48.135184 ] } },
    { "type": "Feature", "properties": { "Latitude": 48.135455, "Longitude": 11.572886, "Name": "Münchner Stadtmuseum", "MustSee": " ", "Number": 4, "Type": "Museum", "Address": "Sankt-Jakobs-Platz 1, 80331 München", "Hours": "Tu-Su 10:00-18:00", "Website": "https://www.muenchner-stadtmuseum.de/", "Phone": "+49 89 233223 70", "Accessibility": wheelchair+"&nbsp;"+elderly+"&nbsp;"+stroller, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.572886, 48.135455 ] } },
    { "type": "Feature", "properties": { "Latitude": 48.135146, "Longitude": 11.576256, "Name": "Viktualienmarkt", "MustSee": fire, "Number": 5, "Type": "Shopping", "Address": "Viktualienmarkt 3, 80331 München", "Hours": "Mo-Sa 08:00-20:00", "Website": "https://www.viktualienmarkt-muenchen.de", "Phone": "+49 89 890682 05", "Accessibility": wheelchair+"&nbsp;"+elderly+"&nbsp;"+stroller, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.576256, 48.135146 ] } },
    { "type": "Feature", "properties": { "Latitude": 48.136503, "Longitude": 11.576054, "Name": "Peterskirche", "MustSee": fire, "Number": 6, "Type": "Religious", "Address": "Rindermarkt 1, 80331 München", "Hours": "Mo-Su 07:30-19:00", "Website": "https://alterpeter.de/pfarrkirche-st-peter/", "Phone": "+49 89 210237 760", "Accessibility": null, "Description": null}, "geometry": { "type": "Point", "coordinates": [ 11.576054, 48.136503 ] } },
    { "type": "Feature", "properties": { "Latitude": 48.136663, "Longitude": 11.576848, "Name": "Altes Rathaus", "MustSee": " ", "Number": 7, "Type": "Landmark", "Address": "Marienplatz 15, 80331 München" , "Hours": null, "Accessibility": null, "Description": null}, "geometry": { "type": "Point", "coordinates": [ 11.576848, 48.136663 ] } },
    { "type": "Feature", "properties": { "Latitude": 48.137245, "Longitude": 11.57551, "Name": "Marienplatz", "MustSee": fire, "Number": 8, "Type": "Landmark", "Address": "Marienplatz, 80331 München", "Hours": "Open 24 hours", "Accessibility": wheelchair+"&nbsp;"+elderly+"&nbsp;"+stroller,
    "image":"<img src='/images/Marienplatz.jpg' border='0' alt='Marienplatz plaza in Munich Germany with Tourists' width='350'/><center><p><i>Image Source: Wikipedia.org</i></p></center>",
    "Description":
    "Marienplatz is a square in the heart of Munich that has been the main square of the city since 1158. As such, it was the main venue where public events, tournaments and executions traditionally took place. <br><br><strong>Why You Should Visit:</strong><br>Ideal location for the very first encounter with Munich. Historic, architecturally attractive and vibrant, filled with people (locals and tourists alike) throughout the day, it never lacks excitement. Also, just like the rest of Munich, it's spotlessly clean."
  }, "geometry": { "type": "Point", "coordinates": [ 11.57551, 48.137245 ] } },
    { "type": "Feature", "properties": { "Latitude": 48.137348, "Longitude": 11.576202, "Name": "Neues Rathaus", "MustSee": fire, "Number": 9, "Type": "Landmark", "Address": " ", "Hours": "Oct-Apr Mo-Fr 10:00-17:00 <br> May-Sep 10:00-19:00", "Accessibility": elev,
    "image":"<img src='/images/NeuesRathaus.jpg' border='0' alt='Neues Rathause building from the front in Munich Germany' width='350'/></img><center><p><i>Image Source: Jörg Lutz</i></p></center>",
    "Description":
    "With its ornate, Neo-Gothic facade, the Neues Rathaus (New Town Hall) at Marienplatz (square) looks slightly older than it actually is. As a matter of fact, initial construction took place between 1867 and 1905 after the neighbouring Altes Rathaus (Old Town Hall) became too small for Munich’s city council. <br> One of the most important attractions is the Glockenspiel in the hall's tower, whose daily performances at 11 a.m. and 12 a.m. (and 5 p.m. in the summer months) attract audiences from around the world." 
  }, "geometry": { "type": "Point", "coordinates": [ 11.576202, 48.137348 ] } },
  { "type": "Feature", "properties": { "Latitude": 48.137665, "Longitude": 11.579815, "Name": "Hofbräuhaus", "MustSee": fire, "Number": 10, "Type": "Food", "Address": "Platzl 9, 80331 München", "Hours": "Mo-Su 09:00-24:00", "Website": "https://www.hofbraeuhaus.de/de/willkommen.html", "Phone": "+49 89 290136 129", "Accessibility": wheelchair+"&nbsp;"+elderly+"&nbsp;"+stroller, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.579815, 48.137665 ] } },
  { "type": "Feature", "properties": { "Latitude": 48.139152, "Longitude": 11.580089, "Name": "Maximilianstrasse", "MustSee": " ", "Number": 11, "Type": "Landmark", "Address": " ", "Hours":"", "Accessibility": null, "Description": null}, "geometry": { "type": "Point", "coordinates": [ 11.580089, 48.139152 ] } },
  { "type": "Feature", "properties": { "Latitude": 48.140292, "Longitude": 11.578246, "Name": "Residenz München", "MustSee": fire, "Number": 12, "Type": "Landmark", "Address": "Residenzstraße 1, 80333 München", "Website": "https://www.residenz-muenchen.de/", "Phone": "+49 89 29067-1", "Accessibility": null, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.578246, 48.140292 ] } },
  { "type": "Feature", "properties": { "Latitude": 48.141756, "Longitude": 11.577346, "Name": "Feldherrnhalle", "MustSee": " ", "Number": 13, "Type": "Landmark", "Address": "Residenzstraße 1, 80333 München", "Hours": "Open 24 hours", "Accessibility": null, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.577346, 48.141756 ] } },
  { "type": "Feature", "properties": { "Latitude": 48.141978, "Longitude": 11.577134, "Name": "Theatine Church", "MustSee": " ", "Number": 14, "Type": "Religious", "Address": "Salvatorplatz 2A, 80333 München", "Hours": "Mo-Su 07:00-20:00", "Website": "http://www.theatinerkirche.de/", "Phone": "+49 89 2106960", "Accessibility": null, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.577134, 48.141978 ] } },
  { "type": "Feature", "properties": { "Latitude": 48.14236, "Longitude": 11.581422, "Name": "Hofgarten and War Memorial", "MustSee": " ", "Number": 15, "Type": "Park", "Address": "Hofgartenstraße 1, 80538 München", "Hours": "Open 24 hours", "Website": "http://www.muenchen.de/sehenswuerdigkeiten/orte/120231.html", "Accessibility": null, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.581422, 48.14236 ] } },
  { "type": "Feature", "properties": { "Latitude": 48.144495, "Longitude": 11.583641, "Name": "Englischer Garden", "MustSee": fire, "Number": 16, "Type": "Park", "Address": "Prinzregentenstraße, 80538 München", "Hours": "Open 24 hours", "Website": "https://www.muenchen.de/sehenswuerdigkeiten/orte/120242.html", "Accessibility": elderly+"&nbsp;"+stroller, "Description": null }, "geometry": { "type": "Point", "coordinates": [ 11.583641, 48.144495 ] } },
  ]
  }
  ;

/**USE properties.Number instead of assigning a new unique id!!!
 * Assign a unique id to each attraction. You'll use this `id`
 * later to associate each point on the map with a listing
 * in the sidebar.
 */
// attractions.features.forEach((attraction, i) => {
//   attractions.properties.id = i;
// });

// CHANGE BASEMAP STYLE
// Create constants for layerlist and inputs for different basemap styles in the html file, look at CityTours.html line 63
const layerList = document.getElementById('menu'); //'menu' is the div element id
const inputs = layerList.getElementsByTagName('input'); //'input', <input> tag specifies an input field where the user can enter data

// All sources and layers are removed when new style is loaded!!
// So we need to add sources and layers each time new style is loaded.
// We will create the functions addSource() and addLayer() to do this each time we load a new style.

function addSource() { 
  // For each new source, we need to create map.addSource()
  map.addSource('englisch_garten', {
    'type': 'geojson',
    'data': {
	"type": "FeatureCollection",
	"features": [
		{
			"type": "Feature",
			"geometry": {
				"type": "MultiLineString",
       	"coordinates": [[[11.58784, 48.14333], [11.58783, 48.14333], [11.58797, 48.14345], [11.58825, 48.14359], [11.58843, 48.14362], [11.58864, 48.14371], [11.58875, 48.14375], [11.589, 48.14385], [11.58914, 48.1439], [11.58929, 48.14395], [11.58936, 48.14398], [11.58954, 48.14404], [11.58994, 48.14418], [11.59022, 48.1443], [11.59057, 48.14447], [11.59073, 48.14457], [11.59096, 48.14467], [11.59117, 48.14481], [11.59124, 48.1449], [11.59131, 48.145], [11.59136, 48.14505], [11.59154, 48.14528], [11.59168, 48.14556], [11.59172, 48.14586], [11.59174, 48.14612], [11.59169, 48.14643], [11.59168, 48.14653], [11.59158, 48.14672], [11.59146, 48.147], [11.59136, 48.14707], [11.59124, 48.14714], [11.59118, 48.14721], [11.59143, 48.14739], [11.59173, 48.14762], [11.59195, 48.14787], [11.59209, 48.14799], [11.59218, 48.14806], [11.59227, 48.14814], [11.59275, 48.14856], [11.59288, 48.14874], [11.59306, 48.14911], [11.59314, 48.1493], [11.59319, 48.14939], [11.59321, 48.14944], [11.59335, 48.14977], [11.59343, 48.15017], [11.59347, 48.15044], [11.59354, 48.15072], [11.59356, 48.15078], [11.59356, 48.1508], [11.59356, 48.15093], [11.59354, 48.15101], [11.59372, 48.15121], [11.59394, 48.15162], [11.59398, 48.15169], [11.59404, 48.15174], [11.59408, 48.1518], [11.59412, 48.15174], [11.5942, 48.15164], [11.59427, 48.15157], [11.59445, 48.15158], [11.59463, 48.15161], [11.59466, 48.15162], [11.59467, 48.15164], [11.59479, 48.15205], [11.59485, 48.15221], [11.5949, 48.15242], [11.59502, 48.15267], [11.59546, 48.153], [11.59554, 48.15318], [11.59547, 48.15337], [11.59541, 48.15352], [11.59547, 48.15372], [11.59569, 48.15398], [11.59598, 48.15422], [11.59599, 48.15423], [11.596, 48.15423], [11.59628, 48.1544], [11.597, 48.15496], [11.59723, 48.15511], [11.59733, 48.15518], [11.59732, 48.1552], [11.59736, 48.15532], [11.59767, 48.15562], [11.59833, 48.15621], [11.59878, 48.15677], [11.59888, 48.15713], [11.59894, 48.15749], [11.59902, 48.15815], [11.59902, 48.15854], [11.59899, 48.15875], [11.59899, 48.15891], [11.59904, 48.15907], [11.59921, 48.15899], [11.59925, 48.15898], [11.59955, 48.15898], [11.59965, 48.159], [11.59973, 48.15903], [11.59991, 48.15916], [11.60003, 48.15928], [11.60006, 48.15934], [11.60026, 48.15959], [11.60015, 48.15968], [11.60026, 48.15969], [11.60032, 48.15966], [11.60026, 48.15969], [11.60056, 48.15974], [11.60091, 48.15985], [11.6011, 48.15994], [11.60133, 48.16008], [11.60153, 48.1602], [11.60162, 48.16029], [11.6019, 48.16023], [11.60214, 48.16018], [11.60236, 48.16018], [11.60244, 48.16019], [11.60254, 48.16023], [11.60271, 48.16036], [11.60331, 48.16088], [11.60368, 48.16115], [11.60396, 48.16137], [11.60407, 48.16145], [11.60513, 48.1623], [11.60516, 48.16233], [11.60618, 48.16319], [11.60717, 48.16393], [11.60705, 48.16431], [11.6068, 48.16472], [11.60658, 48.165], [11.60661, 48.16505], [11.6068, 48.16538], [11.60728, 48.16576], [11.60766, 48.16607], [11.60782, 48.16625], [11.60787, 48.16637], [11.60787, 48.16653], [11.60786, 48.16659], [11.60794, 48.16661], [11.60799, 48.16662], [11.60802, 48.16662], [11.60808, 48.1667], [11.60742, 48.16708], [11.60714, 48.16724], [11.60676, 48.16744], [11.6065, 48.16761], [11.60634, 48.1677], [11.60625, 48.16774], [11.60598, 48.16758], [11.60586, 48.16748], [11.60534, 48.16727], [11.60514, 48.16716], [11.60507, 48.1671], [11.60502, 48.16709], [11.60493, 48.16707], [11.60486, 48.16706], [11.60468, 48.16698], [11.60453, 48.16689], [11.60441, 48.16686], [11.60406, 48.16678], [11.60409, 48.1667], [11.60413, 48.16659], [11.60418, 48.16644], [11.60414, 48.1663], [11.60394, 48.16618], [11.60308, 48.16593], [11.60273, 48.16577], [11.60244, 48.16548], [11.60237, 48.16537], [11.6021, 48.16503], [11.60187, 48.16486], [11.60147, 48.16455], [11.60139, 48.1644], [11.60136, 48.16435], [11.60124, 48.16407], [11.60121, 48.16343], [11.60115, 48.16315], [11.60091, 48.16285], [11.60068, 48.16253], [11.60062, 48.16247], [11.60054, 48.16226], [11.6003, 48.16191], [11.60017, 48.16183], [11.59992, 48.16173], [11.59926, 48.16144], [11.59882, 48.16124], [11.59844, 48.1611], [11.59828, 48.16119], [11.59816, 48.16129], [11.59807, 48.16138], [11.59808, 48.16138], [11.59797, 48.16149], [11.59784, 48.16185], [11.59772, 48.16193], [11.59734, 48.16207], [11.59711, 48.16213], [11.59695, 48.16212], [11.59681, 48.16208], [11.59673, 48.16206], [11.59655, 48.16194], [11.59651, 48.16192], [11.59639, 48.16181], [11.59626, 48.1616], [11.59622, 48.16133], [11.59613, 48.1612], [11.59596, 48.16114], [11.59571, 48.16112], [11.59537, 48.16117], [11.59508, 48.16121], [11.59498, 48.16121], [11.59481, 48.16118], [11.59458, 48.16105], [11.59436, 48.16085], [11.59425, 48.16066], [11.5941, 48.16047], [11.5939, 48.16035], [11.59373, 48.16026], [11.59352, 48.16017], [11.5934, 48.16015], [11.5933, 48.16013], [11.59313, 48.1599], [11.59293, 48.15979], [11.59286, 48.15972], [11.59277, 48.15967], [11.59267, 48.15961], [11.59257, 48.15945], [11.59237, 48.15939], [11.59213, 48.15883], [11.59195, 48.15854], [11.59178, 48.15841], [11.59159, 48.15825], [11.59149, 48.15812], [11.59152, 48.15795], [11.59153, 48.15782], [11.59149, 48.15768], [11.59124, 48.15744], [11.59113, 48.15727], [11.59115, 48.15709], [11.59114, 48.15692], [11.59102, 48.15673], [11.59096, 48.15664], [11.5909, 48.15654], [11.59091, 48.15641], [11.59091, 48.15619], [11.591, 48.15594], [11.59134, 48.15563], [11.59121, 48.15548], [11.59105, 48.15531], [11.59097, 48.15492], [11.59097, 48.15461], [11.59097, 48.15445], [11.59093, 48.15427], [11.5909, 48.15414], [11.59063, 48.15398], [11.59052, 48.15392], [11.59044, 48.15387], [11.59041, 48.15385], [11.59031, 48.15363], [11.59022, 48.15338], [11.59011, 48.15318], [11.59009, 48.15315], [11.59003, 48.1531], [11.58989, 48.15303], [11.58972, 48.15294], [11.58943, 48.1528], [11.58917, 48.15264], [11.58895, 48.1525], [11.58859, 48.15228], [11.58854, 48.15224], [11.58856, 48.15216], [11.58865, 48.15201], [11.58853, 48.15193], [11.58843, 48.15179], [11.58836, 48.15169], [11.58827, 48.15158], [11.58821, 48.15148], [11.58807, 48.15137], [11.5879, 48.15125], [11.58773, 48.15111], [11.58781, 48.15101], [11.58795, 48.15081], [11.58805, 48.15059], [11.58808, 48.15035], [11.58797, 48.15011], [11.58786, 48.14992], [11.58767, 48.14965], [11.58753, 48.14967], [11.58738, 48.14971], [11.5872, 48.14975], [11.58715, 48.14963], [11.58714, 48.14947], [11.58718, 48.14929], [11.58719, 48.14928], [11.58724, 48.14916], [11.58728, 48.14907], [11.58727, 48.14888], [11.58732, 48.14878], [11.58735, 48.14872], [11.58733, 48.14788], [11.58736, 48.14704], [11.5874, 48.14667], [11.58744, 48.14631], [11.58743, 48.14613], [11.58741, 48.14605], [11.5873, 48.14595], [11.58726, 48.14587], [11.58725, 48.14574], [11.58742, 48.14574], [11.58747, 48.14574], [11.58774, 48.14575], [11.58779, 48.14576], [11.58817, 48.14582], [11.58822, 48.14576], [11.5884, 48.14557], [11.58844, 48.14552], [11.58854, 48.14541], [11.58859, 48.14533], [11.58857, 48.14513], [11.58851, 48.14498], [11.58838, 48.14471], [11.58838, 48.14456], [11.58838, 48.14451], [11.58839, 48.14427], [11.58834, 48.14392], [11.58833, 48.14375], [11.58825, 48.14359], [11.58797, 48.14345], [11.58783, 48.14333], [11.58784, 48.14333]]],
			},
			"properties": {
				"name": "Englisch Garten Trail",
			}
		}
	]
}
});
  
  map.addSource('old-town-route', { 
      'type': 'geojson',
      'data': {
          'type': 'Feature',
          'properties': {'name': "Walking tour route line", 'description': "Old Town Route", 'color': '#f1bc41'},
          'geometry': {
          'type': 'MultiLineString',
          'coordinates': [ 
              [ 
                  [ 11.571508104706643, 48.138139021750831 ], [ 11.5704909, 48.1383712 ], [ 11.5696379, 48.1384338 ], [ 11.5684488, 48.1386454 ], [ 11.5673664, 48.1388956 ], [ 11.5671385, 48.1389618 ], [ 11.5663097, 48.139155099999989 ] ], [ [ 11.570099734088437, 48.135190253986437 ], [ 11.57021046771742, 48.13523359448854 ] ], [ [ 11.57021046771742, 48.13523359448854 ], [ 11.570128289798038, 48.135201629235006 ], [ 11.570099734088437, 48.135190253986437 ] ], [ [ 11.570099734088437, 48.135190253986437 ], [ 11.570081066774131, 48.135182817808413 ], [ 11.569859911579684, 48.135096170879052 ], [ 11.5697442, 48.1350511 ], [ 11.570099734088437, 48.135190253986437 ] ], [ [ 11.571563280411418, 48.135763077554728 ], [ 11.571383824307015, 48.135692262661919 ], [ 11.571136741247141, 48.135596117923029 ], [ 11.571011795415281, 48.135546764266344 ], [ 11.570761355864329, 48.135448568738596 ], [ 11.570613474271058, 48.135391099209421 ], [ 11.5703469, 48.135286599999986 ], [ 11.570282986528211, 48.135261802578867 ], [ 11.57021046771742, 48.13523359448854 ] ], [ [ 11.57021046771742, 48.13523359448854 ], [ 11.571563280411418, 48.135763077554728 ] ], [ [ 11.571508104706643, 48.138139021750831 ], [ 11.571702257293273, 48.138324402193028 ] ], [ [ 11.571684195117188, 48.13580945398963 ], [ 11.57169777581063, 48.135814692877574 ], [ 11.571707228038619, 48.135818503064989 ], [ 11.57171152997878, 48.135822337178652 ], [ 11.571714111569888, 48.135826995909824 ], [ 11.571715539720834, 48.135832073517406 ], [ 11.571715230668554, 48.135837813052774 ], [ 11.571714297392283, 48.135843492599044 ], [ 11.571710085281298, 48.135850730667428 ], [ 11.571705771272324, 48.135855929949265 ], [ 11.571696178000106, 48.135862267992181 ], [ 11.571680747794991, 48.135873839420256 ], [ 11.571658241393564, 48.135891975965841 ], [ 11.571638075734546, 48.135910056447599 ], [ 11.571624631954045, 48.135922110100232 ], [ 11.57161475446263, 48.135935259147502 ], [ 11.571599908880934, 48.135954395744236 ], [ 11.571585239299255, 48.135977054175328 ], [ 11.571568698550509, 48.135997403987901 ], [ 11.571537253491632, 48.136035716442009 ], [ 11.571498382438484, 48.13606596836209 ], [ 11.571464538122507, 48.136091406670531 ], [ 11.571432388924752, 48.136115631752006 ], [ 11.571394978238139, 48.136139974639278 ], [ 11.571369433598733, 48.136155824999449 ], [ 11.571357860843525, 48.136170187242577 ], [ 11.571349795724238, 48.136184470943171 ], [ 11.571355937170058, 48.136201962313926 ], [ 11.571363773776858, 48.136218240467763 ], [ 11.571375059368384, 48.136233266133111 ], [ 11.571441828169959, 48.136269379336341 ], [ 11.571471121386208, 48.136293403831509 ], [ 11.571604548349345, 48.136398539822551 ], [ 11.571694593079215, 48.136478791490525 ], [ 11.571786743982409, 48.136566047474943 ], [ 11.571817615334805, 48.136586510762172 ], [ 11.571879064721655, 48.136621567585323 ], [ 11.57195331916771, 48.136666914917299 ], [ 11.572032489789619, 48.136740358311663 ], [ 11.571708901019454, 48.136990942585413 ], [ 11.571763743021018, 48.137034024679949 ], [ 11.5713259, 48.1373836 ], [ 11.5714278, 48.137752399999989 ], [ 11.5713634, 48.1378562 ], [ 11.571508081790665, 48.138138999870236 ], [ 11.571508104706643, 48.138139021750831 ] ], [ [ 11.571702257293273, 48.138324402193028 ], [ 11.57167790698889, 48.138301060783704 ], [ 11.571611392163058, 48.138237633016438 ], [ 11.571560013346712, 48.138188584503681 ], [ 11.5715082, 48.138139 ], [ 11.571508104706643, 48.138139021750831 ] ], [ [ 11.571563280411418, 48.135763077554728 ], [ 11.571638538049408, 48.13579253295908 ] ], [ [ 11.571638538049408, 48.13579253295908 ], [ 11.571635605256553, 48.135791452940673 ], [ 11.571603072113822, 48.135778779696203 ], [ 11.571563280411418, 48.135763077554728 ] ], [ [ 11.571668658761411, 48.135803678116176 ], [ 11.571653547662674, 48.135798060338409 ], [ 11.571638538049408, 48.13579253295908 ] ], [ [ 11.571638538049408, 48.13579253295908 ], [ 11.571652774499679, 48.135798105023397 ], [ 11.571668658761411, 48.135803678116176 ] ], [ [ 11.571668658761411, 48.135803678116176 ], [ 11.571674888206983, 48.135805863756197 ], [ 11.571684195117188, 48.13580945398963 ] ], [ [ 11.571684195117188, 48.13580945398963 ], [ 11.571668658761411, 48.135803678116176 ] ], [ [ 11.572107746903706, 48.135253525810761 ], [ 11.572093367353515, 48.13527823618233 ], [ 11.572071300869345, 48.135315885446751 ], [ 11.572043057923167, 48.135371932430751 ], [ 11.5720126, 48.1354209 ], [ 11.5719348, 48.1355211 ], [ 11.5719026, 48.1355497 ], [ 11.571698272937578, 48.135814687630663 ], [ 11.571684195117188, 48.13580945398963 ] ], [ [ 11.571702257293273, 48.138324402193028 ], [ 11.57188196110382, 48.13849574452864 ] ], [ [ 11.57188196110382, 48.13849574452864 ], [ 11.571809323043972, 48.138426818231032 ], [ 11.57175423705579, 48.138374149961038 ], [ 11.571702257293273, 48.138324402193028 ] ], [ [ 11.571961335578315, 48.138562104586242 ], [ 11.5719454, 48.1385489 ], [ 11.571894477012265, 48.138507620881505 ], [ 11.57188196110382, 48.13849574452864 ] ], [ [ 11.57188196110382, 48.13849574452864 ], [ 11.5718945, 48.138507699999984 ], [ 11.571961335578315, 48.138562104586242 ] ], [ [ 11.571961335578315, 48.138562104586242 ], [ 11.5721144, 48.138686699999987 ], [ 11.5722915, 48.138769 ], [ 11.572372553502261, 48.138801863903375 ] ], [ [ 11.572372553502261, 48.138801863903375 ], [ 11.5722915, 48.1387708 ], [ 11.5721117, 48.1386867 ], [ 11.571961335578315, 48.138562104586242 ] ], [ [ 11.572107691925771, 48.135253517730547 ], [ 11.572107746903706, 48.135253525810761 ] ], [ [ 11.572107746903706, 48.135253525810761 ], [ 11.572458850760365, 48.135305128240731 ], [ 11.57261731200569, 48.135364486113623 ], [ 11.572779872725576, 48.135437477245119 ], [ 11.572877853567098, 48.135483320655467 ] ], [ [ 11.575784608699751, 48.137036400037893 ], [ 11.5757733, 48.137039699999988 ], [ 11.5757519, 48.1368965 ], [ 11.5755588, 48.136739 ], [ 11.5760952, 48.1366459 ], [ 11.576342, 48.1366173 ], [ 11.5765136, 48.1365672 ], [ 11.5766102, 48.1364741 ], [ 11.5765995, 48.1364025 ], [ 11.5765673, 48.1363309 ], [ 11.5764814, 48.1362808 ], [ 11.5763849, 48.1362378 ], [ 11.5762883, 48.136237800000011 ], [ 11.5761918, 48.1362521 ], [ 11.57646, 48.1358798 ], [ 11.5765887, 48.1357581 ], [ 11.576687039525911, 48.135663859445899 ], [ 11.576814, 48.135600599999982 ], [ 11.576714342775684, 48.135507430360178 ], [ 11.576643756550299, 48.135413466356425 ], [ 11.576605091678633, 48.135327718627629 ], [ 11.576582041870067, 48.135230793617581 ], [ 11.576565930788828, 48.135151306645561 ], [ 11.576563900079671, 48.135110751296907 ], [ 11.576571290223733, 48.13505645093349 ], [ 11.576557345296999, 48.135020222996438 ], [ 11.576527988593314, 48.134999227851196 ], [ 11.57647702608635, 48.134990897730184 ], [ 11.5763819, 48.1349993 ], [ 11.576193555775113, 48.135022971336298 ], [ 11.576001, 48.1350888 ], [ 11.5758562, 48.1349617 ], [ 11.575791857866781, 48.134995441464845 ], [ 11.5757275, 48.1350244 ], [ 11.575337614911396, 48.135171344069263 ], [ 11.575305670759667, 48.135206783481486 ], [ 11.5753019647053, 48.135236381163921 ], [ 11.575288069130265, 48.135269679658826 ], [ 11.5752607, 48.1352893 ], [ 11.5751213, 48.1352893 ], [ 11.574544579081289, 48.135326508209758 ], [ 11.574096365727486, 48.135395003954244 ], [ 11.574053676223, 48.135342417814755 ], [ 11.573910946944165, 48.135177579297945 ], [ 11.573822764428112, 48.135087535120384 ], [ 11.573724027623831, 48.134965720234646 ], [ 11.5735388, 48.1347057 ], [ 11.573513625829465, 48.134678997133236 ], [ 11.573485281388262, 48.134652128666936 ], [ 11.573462059303019, 48.13463378941421 ], [ 11.573424726444037, 48.134614980557949 ], [ 11.573386535021299, 48.134602477484528 ], [ 11.573347445767176, 48.134595495253649 ], [ 11.5733108, 48.134591199999988 ], [ 11.573289594484084, 48.134588933442295 ], [ 11.573261451424653, 48.134589564086092 ], [ 11.573229947490368, 48.134593413311293 ], [ 11.573199733933951, 48.134599591071265 ], [ 11.5731807, 48.1346091 ], [ 11.573167646129157, 48.134615240652771 ], [ 11.573142437072336, 48.134627592813558 ], [ 11.573127349904722, 48.134631074153184 ], [ 11.5731083, 48.1346314 ], [ 11.573091857045917, 48.134625582888759 ], [ 11.573070317985382, 48.134617421497524 ], [ 11.573046590672941, 48.134612452410707 ], [ 11.5730184, 48.1346091 ], [ 11.572992532027426, 48.134611306205173 ], [ 11.572971699456744, 48.134617273713822 ], [ 11.5729464118543, 48.134628055952511 ], [ 11.5727717, 48.1346941 ], [ 11.572526224528888, 48.134782131456035 ], [ 11.572480519400823, 48.134803735191305 ], [ 11.572420886342076, 48.134840862109911 ], [ 11.572379499555344, 48.13486863250457 ], [ 11.572344788855645, 48.134896253337452 ], [ 11.572309988760392, 48.134922086608931 ], [ 11.572283110639214, 48.134945952866154 ], [ 11.572258992306745, 48.134971546851745 ], [ 11.572234918628581, 48.134998034608309 ], [ 11.572214537871451, 48.135018176205712 ], [ 11.572200967281931, 48.135040849587519 ], [ 11.572189531014519, 48.135052737843147 ], [ 11.572180854558029, 48.135066353833842 ], [ 11.572171061845456, 48.135088457020217 ], [ 11.572156754923952, 48.135117145419031 ], [ 11.572148212151388, 48.135140031118787 ], [ 11.572140919331341, 48.135163699333283 ], [ 11.572130847884916, 48.135204450548891 ], [ 11.572120088449216, 48.135231438458931 ], [ 11.572110093336947, 48.13524949360972 ], [ 11.572107746903706, 48.135253525810761 ] ], [ [ 11.572451981474918, 48.138832304819537 ], [ 11.572372553502261, 48.138801863903375 ] ], [ [ 11.572372553502261, 48.138801863903375 ], [ 11.5724417, 48.138829899999983 ], [ 11.572451981474918, 48.138832304819537 ] ], [ [ 11.572451981474918, 48.138832304819537 ], [ 11.572689168420036, 48.138887782444002 ] ], [ [ 11.572689168420036, 48.138887782444002 ], [ 11.5724551, 48.1388335 ], [ 11.572451981474918, 48.138832304819537 ] ], [ [ 11.572854593978168, 48.138926146028439 ], [ 11.572689168420036, 48.138887782444002 ] ], [ [ 11.572689168420036, 48.138887782444002 ], [ 11.5728547, 48.1389265 ], [ 11.572854593978168, 48.138926146028439 ] ], [ [ 11.572820623748518, 48.138812730755042 ], [ 11.572817287342557, 48.138801591607667 ] ], [ [ 11.572817287342557, 48.138801591607667 ], [ 11.572817217188367, 48.138801600158452 ], [ 11.572820623748518, 48.138812730755042 ] ], [ [ 11.572817287342557, 48.138801591607667 ], [ 11.5728172, 48.138801299999983 ], [ 11.572929622207864, 48.138787502916394 ], [ 11.572931727499329, 48.138787643005095 ] ], [ [ 11.572931727499329, 48.138787643005095 ], [ 11.572817287342557, 48.138801591607667 ] ], [ [ 11.572820623748518, 48.138812730755042 ], [ 11.572855391517905, 48.138926330984638 ], [ 11.572854593978168, 48.138926146028439 ] ], [ [ 11.572854593978168, 48.138926146028439 ], [ 11.572820623748518, 48.138812730755042 ] ], [ [ 11.572931727499329, 48.138787643005095 ], [ 11.573096719128106, 48.138798621752514 ] ], [ [ 11.573096719128106, 48.138798621752514 ], [ 11.572933609856417, 48.138787413572949 ], [ 11.572931727499329, 48.138787643005095 ] ], [ [ 11.573096719128106, 48.138798621752514 ], [ 11.573109867276882, 48.138799496646627 ], [ 11.573421632006932, 48.138813123955892 ], [ 11.573475941255541, 48.138815742425159 ] ], [ [ 11.573475941255541, 48.138815742425159 ], [ 11.5731095, 48.1387995 ], [ 11.573096719128106, 48.138798621752514 ] ], [ [ 11.573475941255541, 48.138815742425159 ], [ 11.573516328531493, 48.138817689659632 ], [ 11.5735923, 48.1388209 ], [ 11.573475941255541, 48.138815742425159 ] ], [ [ 11.5755158, 48.1374478 ], [ 11.5764278, 48.1372402 ], [ 11.5761918, 48.137104199999989 ], [ 11.575774407625007, 48.137039382209132 ], [ 11.575784608699751, 48.137036400037893 ] ], [ [ 11.575784608699751, 48.137036400037893 ], [ 11.576279622454255, 48.136891688248326 ] ], [ [ 11.576279622454255, 48.136891688248326 ], [ 11.57616587638814, 48.136925143310961 ], [ 11.575784608699751, 48.137036400037893 ] ], [ [ 11.576612635593648, 48.136787095574988 ], [ 11.576583393819835, 48.136802342828211 ], [ 11.576279622454255, 48.136891688248326 ] ], [ [ 11.576279622454255, 48.136891688248326 ], [ 11.576582115677432, 48.136803257704202 ], [ 11.576612635593648, 48.136787095574988 ] ], [ [ 11.576612635593648, 48.136787095574988 ], [ 11.5768685, 48.1366516 ], [ 11.576734354720484, 48.13672362875657 ], [ 11.576612635593648, 48.136787095574988 ] 
              ] 
          ]
      }}
  });

  map.addSource('walking-routes',{
      'type': 'geojson',
      'data':{
        "type": "FeatureCollection",
        "features": [

        {
          "type": "Feature",
          "properties": {
            "name": "Munich Introduction Walking Tour",
            "distance": "2.5 Km",
            "color": '#f1bc41' //'#36bfb6'
          },
          "geometry": {
            "coordinates": [[11.5755, 48.13725], [11.57548, 48.13723], [11.57546, 48.13718], [11.57543, 48.13712], [11.57535, 48.13714], [11.57525, 48.13715], [11.57512, 48.13718], [11.57516, 48.13726], [11.57516, 48.13727], [11.57517, 48.13728], [11.57525, 48.13743], [11.57512, 48.13746], [11.57513, 48.13747], [11.57501, 48.1375], [11.57503, 48.13753], [11.57547, 48.13742], [11.57547, 48.13742], [11.57633, 48.13723], [11.57633, 48.13723], [11.57628, 48.13718], [11.57628, 48.13718], [11.57634, 48.13716], [11.57634, 48.13716], [11.57625, 48.13703], [11.57625, 48.13703], [11.57615, 48.13691], [11.57634, 48.13686], [11.57659, 48.13679], [11.57696, 48.13652], [11.57676, 48.13655], [11.57676, 48.13655], [11.57672, 48.13652], [11.57672, 48.13652], [11.57669, 48.1365], [11.57669, 48.1365], [11.57669, 48.1365], [11.57663, 48.13646], [11.57664, 48.13642], [11.57664, 48.13642], [11.57665, 48.1364], [11.57658, 48.13631], [11.57643, 48.13623], [11.57624, 48.1362], [11.57624, 48.1362], [11.57637, 48.13598], [11.57641, 48.13593], [11.57641, 48.13593], [11.57621, 48.13585], [11.57621, 48.13585], [11.57646, 48.13559], [11.57664, 48.1355], [11.57664, 48.1355], [11.57672, 48.13553], [11.57693, 48.13573], [11.57693, 48.13573], [11.57724, 48.13603], [11.57724, 48.13603], [11.57682, 48.13623], [11.57682, 48.13623], [11.57701, 48.13642], [11.57723, 48.1366], [11.57723, 48.1366], [11.57711, 48.13657], [11.57711, 48.13657], [11.57723, 48.1366], [11.57723, 48.1366], [11.5772, 48.13662], [11.5772, 48.13662], [11.57732, 48.1367], [11.57738, 48.13675], [11.57809, 48.13724], [11.57829, 48.13744], [11.57829, 48.13744], [11.57878, 48.13722], [11.57909, 48.13708], [11.57909, 48.13708], [11.57957, 48.13758], [11.57957, 48.13758], [11.57975, 48.13774], [11.57975, 48.13774], [11.57996, 48.13794], [11.57998, 48.13797], [11.58001, 48.138], [11.58001, 48.13814], [11.58001, 48.13814], [11.57991, 48.1382], [11.57991, 48.1382], [11.57994, 48.13822], [11.57994, 48.13822], [11.58001, 48.13832], [11.58003, 48.13834], [11.58003, 48.13834], [11.57995, 48.13838], [11.57986, 48.13842], [11.57982, 48.13844], [11.57982, 48.13844], [11.57992, 48.13857], [11.57998, 48.13864], [11.57998, 48.13864], [11.57966, 48.13877], [11.57966, 48.13877], [11.57995, 48.13911], [11.57996, 48.13912], [11.57996, 48.13912], [11.58008, 48.1391], [11.58008, 48.1391], [11.57996, 48.13912], [11.57938, 48.13923], [11.57898, 48.13931], [11.57888, 48.13932], [11.57838, 48.13942], [11.57838, 48.13942], [11.57839, 48.13944], [11.57841, 48.13949], [11.57855, 48.13975], [11.57861, 48.13999], [11.57861, 48.1401], [11.57856, 48.14013], [11.57841, 48.14017], [11.57823, 48.1402], [11.5782, 48.14022], [11.5782, 48.14022], [11.57809, 48.14029], [11.57741, 48.14043], [11.57741, 48.14043], [11.57739, 48.14049], [11.57744, 48.1408], [11.57746, 48.14088], [11.57756, 48.14126], [11.57756, 48.14127], [11.57757, 48.14128], [11.5776, 48.14145], [11.5776, 48.14145], [11.57692, 48.14159], [11.57692, 48.14159], [11.57695, 48.14164], [11.57705, 48.14181], [11.57705, 48.14181], [11.57728, 48.14177], [11.57729, 48.1418], [11.57735, 48.14179], [11.57735, 48.14179], [11.57729, 48.1418], [11.57728, 48.14177], [11.57705, 48.14181], [11.57705, 48.14181], [11.577, 48.14182], [11.57707, 48.142], [11.57707, 48.142], [11.57732, 48.14265], [11.57741, 48.14263], [11.57741, 48.14263], [11.57789, 48.14253], [11.57803, 48.14249], [11.57803, 48.14249], [11.5781, 48.14248], [11.57815, 48.14246], [11.57822, 48.14257], [11.57856, 48.1425], [11.57915, 48.14238], [11.57968, 48.14227], [11.58022, 48.14216], [11.58083, 48.14203], [11.58105, 48.14199], [11.58109, 48.14209], [11.58119, 48.14207], [11.58128, 48.14205], [11.58128, 48.14205], [11.58143, 48.14235], [11.58143, 48.14235], [11.58147, 48.14242], [11.58157, 48.14262], [11.58165, 48.1428], [11.58182, 48.14318], [11.58186, 48.14327], [11.58188, 48.14332], [11.58191, 48.14337], [11.58199, 48.14351], [11.58199, 48.14351], [11.58206, 48.14359], [11.58247, 48.1438], [11.58278, 48.1439], [11.58292, 48.14392], [11.58323, 48.1439], [11.58336, 48.14392], [11.58352, 48.14422], [11.58354, 48.14426], [11.5836, 48.1443], [11.58363, 48.14435], [11.58367, 48.14442], [11.58367, 48.14442], [11.58367, 48.14447], [11.58367, 48.14447], [11.58364, 48.14447]],
            "type": "LineString"
          },
          "id": "64c4cf28db71265f4812953b53953e0e"
        }
      ]
      }
  
  
      });

    //IF ADD THIS SOUCE THEN FUNCTION FOR LIST DOESNT WORK!
    // map.addSource('munich-intro-tour-points', {
    //     'type': 'geojson',
    //     'data': attractions
    //     });

  //Add source before this//          
  }

function addLayer() {
// For each source we added, we need to use map.addLayer() to add it to the map.
// map.setLayerZoomRange is used to set the layer zoom range
  map.addLayer({
    'id': 'englisch_garten',
    'type': 'line',
    'source': 'englisch_garten',
    'metadata': 'Englisch Garten',
    'layer.minZoom': 12,
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
    'line-color': '#39753c',
    'line-width': 3.5,
    'line-opacity': 0.6,
    'line-dasharray': [1, 3]
    },
    'metadata': {
      'displayName': 'Englisch Garten Route',
      'showInLegend': true
}
    });

    map.addLayer({
        'id': 'old-town-route',
        'type': 'line',
        'source': 'old-town-route',
        'metadata': 'Old Town Route',
        'layer.minZoom': 9,
        'layout': {
          'line-join': 'round',
          'line-cap': 'round'
        },
        'paint': {
        'line-color': ['get','color'],
        'line-width': 6,
        'line-opacity': 0.8,
        },
        'metadata': {
          'displayName': 'Old Town Route',
          'showInLegend': true
    }
        });
    map.setLayerZoomRange('old-town-route', 12, 22);

    
    map.addLayer({
        'id': 'walking-routes',
        'type': 'line',
        'source': 'walking-routes',
        'metadata': 'Walking Routes',
        'layer.minZoom': 9,
        'layout': {
            'line-join': 'round',
            'line-cap': 'round'
        },
        'paint': {
        'line-color': ['get','color'], // ['get','color']
        'line-width': 6,
        'line-opacity': 0.8,
        },
        'metadata': {
          'displayName': 'Walking Routes',
          'showInLegend': true
    }
        });
    map.setLayerZoomRange('walking-routes', 12, 22);


    //IF ADD THIS LAYER THEN FUNCTION FOR LIST DOESNT WORK!
    // map.addLayer({
    //     'id': 'munich-intro-tour-points',
    //     'type': 'circle',
    //     'source': {        
    //       'type': 'geojson',
    //     'data': attractions
    //     },
    //     'layer.minZoom': 12,
    //     'paint': {
    //     'circle-color': '#36bfb6', // ['get','color']
    //     'circle-radius': 4,
    //     'circle-stroke-width': 2,
    //     'circle-stroke-color': '#ffffff'
    //     },
    //     'metadata': {
    //       'displayName': 'Munich Introduction Points',
    //       'showInLegend': true
    // }
    //     });
    // map.setLayerZoomRange('munich-intro-tour-points', 12, 22);


 //Add layer before this// 
}


// Here when map loads a style, we run the functions addSource() and addLayer() we created above 
//which adds all the geojson sources and adds to the maps as layers.
map.on('style.load', function(){

      map.addSource('munich-intro-tour-points', {
        'type': 'geojson',
        'data': attractions
      });
    
        /**
       * Add all the things to the page:
       * - The location listings on the side of the page
       * - The markers onto the map
       */
        buildLocationList(attractions);
        addMarkers();
        addSource();
        addLayer();

    //whatever layers you want to toggle go in to this function
    // toggleLayer(['munich-intro-tour-points'], 'Points');
    // toggleLayer(['walking-routes','old-town-route'], 'Routes');

    // function toggleLayer(ids, name) {
    //     var link = document.createElement('a');
    //     link.href = '#';
    //     link.className = 'active';
    //     link.textContent = name;

    //     link.onclick = function (e) {
    //         e.preventDefault();
    //         e.stopPropagation();
    //         for (layers in ids){
    //             var visibility = map.getLayoutProperty(ids[layers], 'visibility');
    //             if (visibility === 'visible') {
    //                 map.setLayoutProperty(ids[layers], 'visibility', 'none');
    //                 this.className = '';
    //             } else {
    //                 this.className = 'active';
    //                 map.setLayoutProperty(ids[layers], 'visibility', 'visible');
    //             }
    //         }

    //     };

    //     var layers = document.getElementById('layernav');
    //     layers.appendChild(link);

    //   }

});

for (const input of inputs) {
input.onclick = (layer) => {
const layerId = layer.target.id;
map.setStyle('mapbox://styles/' + layerId);
};
}


      /**
       * Add a marker to the map for every attraction listing.
       **/
      function addMarkers() {
        /* For each feature in the GeoJSON object above: */
        for (const marker of attractions.features) {
          /* Create a div element for the marker. */
          const el = document.createElement('div');
          /* Assign a unique `id` to the marker. */
          el.id = `marker-${marker.properties.Number}`;
          /* Assign the `marker` class to each marker for styling. */
          el.className = 'marker';
          el.textContent = marker.properties.Number;

          /**
           * Create a marker using the div element
           * defined above and add it to the map.
           **/
          new mapboxgl.Marker(el, { offset: [0, -23] })
            .setLngLat(marker.geometry.coordinates)
            .addTo(map);

          /**
           * Listen to the element and when it is clicked, do three things:
           * 1. Fly to the point
           * 2. Close all other popups and display popup for clicked attraction
           * 3. Highlight listing in sidebar (and remove highlight for all other listings)
           **/
          el.addEventListener('click', (e) => {
            /* Fly to the point */
            flyToattraction(marker);
            /* Close all other popups and display popup for clicked attraction */
            createPopUp(marker);
            /* Highlight listing in sidebar */
            const activeItem = document.getElementsByClassName('active');
            e.stopPropagation();
            if (activeItem[0]) {
              activeItem[0].classList.remove('active');
            }
            const listing = document.getElementById(
              `listing-${marker.properties.Number}`
            );
            listing.classList.add('active');

            //Highlight marker on click
            const activeMarker = document.getElementsByClassName('active');
            e.stopPropagation();
            if (activeMarker[0]) {
              activeMarker[0].classList.remove('active');
            }
            const markerOn = document.getElementById(
              `marker-${marker.properties.Number}`
            );
            markerOn.classList.add('active');

          });
        }
      }

      /**
       * Add a listing for each attraction to the sidebar.
       **/
      function buildLocationList(attractions) {
        for (const attraction of attractions.features) {
          /* Add a new listing section to the sidebar. */
          const listings = document.getElementById('listings');
          const listing = listings.appendChild(document.createElement('div'));
          /* Assign a unique `id` to the listing. */
          listing.id = `listing-${attraction.properties.Number}`;
          /* Assign the `item` class to each listing for styling. */
          listing.className = 'item';

          /* Add the link to the individual listing created above. */
          const link = listing.appendChild(document.createElement('a'));
          link.href = '#';
          link.className = 'title';
          link.id = `link-${attraction.properties.Number}`;
          link.innerHTML = `${attraction.properties.Number}&middot ${attraction.properties.Name}&nbsp;&nbsp;&nbsp;${attraction.properties.MustSee}&nbsp;${attraction.properties.Accessibility}`;

          /* Add details to the individual listing. */
          const details = listing.appendChild(document.createElement('div'));
          details.className = 'details';
          details.innerHTML = `<i><strong><font color="#9f9f9f"><font size="1">${attraction.properties.Type}</font color></font size></strong></i><br>
          ${attraction.properties.Address}<br>
          ${attraction.properties.Hours}&nbsp;
          <a href=${attraction.properties.Website}><i class="fa-solid fa-link"></i></a>
          `;
          // if (attraction.properties.Phone) {
          //   details.innerHTML += `${attraction.properties.Phone}`;
          // };
          // details.innerHTML += `&nbsp;&nbsp;<a href=${attraction.properties.Website}><i class="fa-solid fa-link"></i></a>`;
          

          /**
           * Listen to the element and when it is clicked, do four things:
           * 1. Update the `currentFeature` to the attraction associated with the clicked link
           * 2. Fly to the point
           * 3. Close all other popups and display popup for clicked attraction
           * 4. Highlight listing in sidebar (and remove highlight for all other listings)
           * 5. Highligh listing in map (and remove highlight for all other listings) **NOT WORKING YET**
           **/
          link.addEventListener('click', function () {
            for (const feature of attractions.features) {
              if (this.id === `link-${feature.properties.Number}`) {
                flyToattraction(feature);
                closePopUp(feature);
              }
            } //Highlight listing in sidebar
            const activeItem = document.getElementsByClassName('active');
            if (activeItem[0]) {
              activeItem[0].classList.remove('active');
            }
            this.parentNode.classList.add('active');


            //Highlight marker on click not working when highlight listing in sidebar is on
            const activeMarker = document.getElementsByClassName('active');
            e.stopPropagation();
            if (activeMarker[0]) {
              activeMarker[0].classList.remove('active');
            }
            const markerOn = document.getElementById(
              `marker-${feature.properties.Number}`
            );
            markerOn.classList.add('active');
          });


          //Listen to the element and when it is hovered on, do this:
          //1. Update the `currentFeature` to the attraction associated with the clicked link
          //2. Highlight listing in map
          //3. Stop highlighting listing when mouse leaves
          link.addEventListener('mouseenter', function() {
            for (const feature of attractions.features) {
              if (this.id === `link-${feature.properties.Number}`) {

              //Highlight marker on hover
              const activeMarker = document.getElementsByClassName('active');
              if (activeMarker[0]) {
                activeMarker[0].classList.remove('active');
              }
              const markerOn = document.getElementById(
                `marker-${feature.properties.Number}`
              );
              markerOn.classList.add('active');
                
              }
            }

          });

          // Need to fix this so that on 'mouseleave' listings, no markers are highlighted.
          link.addEventListener('mouseleave', function() {
            for (const feature of attractions.features) {
              if (this.id === `link-${feature.properties.Number}`) 
              {}
              else {

              const markerOff = document.getElementById(
                `marker-${feature.properties.Number}`
              );
              markerOff.classList.remove('active');
                
              }
            }

          });
        }
      }

      /**
       * Use Mapbox GL JS's `flyTo` to move the camera smoothly
       * a given center point.
       **/
      function flyToattraction(currentFeature) {
        map.flyTo({
          center: currentFeature.geometry.coordinates,
          offset: [-150, -150],
          zoom: 16
        });
      }

      /**
       * Create a Mapbox GL JS `Popup`.
       **/
      function createPopUp(currentFeature) {
        const popUps = document.getElementsByClassName('mapboxgl-popup');
        if (popUps[0]) popUps[0].remove();
        const popup = new mapboxgl.Popup({ closeOnClick: false })
          .setLngLat(currentFeature.geometry.coordinates)
          .setHTML(
            `<h3>${currentFeature.properties.Name}</h3>
            <img id="myImg" ${currentFeature.properties.image} style="width:100%;max-width:350px">
            <div id="myModal" class="modal">
              <span class="close">$times;</span>
              <img class="modal-content" id="img01">
              <div id="caption"></div>
            </div>
            <p>${currentFeature.properties.Description}</p>`
          )
          .addTo(map);
      }

            /**
       * Close lose all other popups and display popup for clicked attraction in the sidebar.
       **/
      function closePopUp(currentFeature) {
        const popUps = document.getElementsByClassName('mapboxgl-popup');
        if (popUps[0]) popUps[0].remove();
        const popup = new mapboxgl.Popup({ closeOnClick: true })
        .setLngLat(currentFeature.geometry.coordinates)

      }


